!function(n){"use strict";var t,e,o,c;!function(n){n.TRACKING_LOADED="trackingConsentLoaded",n.TRACKING_ACCEPTED="trackingConsentAccepted",n.TRACKING_DECLINED="trackingConsentDeclined",n.TRACKING_RESET="trackingConsentReset"}(t||(t={})),function(n){n.ACCEPTED="yes",n.DECLINED="no",n.NO_INTERACTION="no_interaction",n.NO_VALUE=""}(e||(e={})),function(n){n.GDPR="GDPR",n.CCPA="CCPA",n.NO_VALUE=""}(o||(o={})),function(n){n.CCPA_BLOCK_ALL="CCPA_BLOCK_ALL",n.GDPR="GDPR"}(c||(c={}));function r(){const n=document.cookie?document.cookie.split("; "):[];let t=void 0;return n.forEach(n=>{const[e,o]=n.split("=");if("_tracking_consent"===decodeURIComponent(e)){var c=JSON.parse(decodeURIComponent(o));t=c}}),t}function s(n,t,e){const o=new XMLHttpRequest,c="https://"+document.location.host+"/set_tracking_consent.json",r=JSON.stringify(n);o.open("POST",c,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){if(4!==o.readyState)return;const n=0===o.status||200>=o.status&&o.status<400;let c;try{c=JSON.parse(o.responseText)}catch(n){c={error:"Unknown error"}}n?(e&&document.dispatchEvent(new CustomEvent(e,{detail:{}})),t(null,c)):t(c)},o.send(r)}function i(n,e){if(null==n||"boolean"!=typeof n)throw TypeError("setTrackingConsent must be called with a boolean consent value");if(null==e||"function"!=typeof e)throw TypeError("setTrackingConsent must be called with a callback function");return!0===n?s({consent:!0},e,t.TRACKING_ACCEPTED):s({consent:!1},e,t.TRACKING_DECLINED)}function u(){try{const t=r();return t&&t.consent===e.ACCEPTED||t&&t.consent===e.DECLINED||t&&t.consent===e.NO_VALUE?(n=t.consent)===e.NO_VALUE?e.NO_INTERACTION:n:e.NO_VALUE}catch(n){return!1}var n}function a(){var n;try{const t=r(),e=(null==t?void 0:t.regulation)===o.CCPA?c.CCPA_BLOCK_ALL:t.regulation;return Boolean(null===(n=null==t?void 0:t.prefs)||void 0===n?void 0:n.limit.includes(e))}catch(n){return!1}}function C(){try{const n=r();return null==n?void 0:n.prefs}catch(n){return!1}}function E(){try{const n=r();return!!(!n||n&&n.consent===e.ACCEPTED||function(){const n=r();switch(l().toUpperCase()){case o.NO_VALUE:return n.consent!==e.DECLINED;case o.GDPR:return n.consent!==e.DECLINED&&n.consent!==e.NO_VALUE;case o.CCPA:return n.consent!==e.DECLINED;default:return!0}}())}catch(n){return!1}}function l(){const n=r();if(n&&n.regulation)switch(n.regulation.toUpperCase()){case o.GDPR:return o.GDPR;case o.CCPA:return o.CCPA;default:return""}return""}function f(){return{getTrackingConsent:u,setTrackingConsent:i,userCanBeTracked:E,getRegulation:l,isRegulationEnforced:a,getShopPrefs:C}}window.Shopify=window.Shopify?window.Shopify:{},window.Shopify.customerPrivacy=window.Shopify.trackingConsent=f(),n.CONSENT_COOKIE_NAME="_tracking_consent",n.shopifyConsentAPI=f}({});
//# sourceMappingURL=consent-tracking-api.js.map
